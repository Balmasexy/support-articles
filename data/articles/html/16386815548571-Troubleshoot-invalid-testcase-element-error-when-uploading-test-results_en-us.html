<h1>Unsupported JUnit XML elements</h1>
<p>When uploading your test results to CircleCI in a job, you may see the following error:</p>
<pre style="background-color: #f3f3f3;" data-darkreader-inline-bgcolor=""><code>invalid testcase element</code></pre>
<p>This can happen when CircleCI is unable to parse the test results generated by your test runner.</p>
<h2>Verify test results file content</h2>
<p>The content of the test results can be verified by uploading the file as an artifact. This is helpful to verify what is being parsed by CircleCI. Here is an example of how to upload an artifact:</p>
<pre style="background-color: #f3f3f3;" data-darkreader-inline-bgcolor=""><code>- store_artifacts:
    path: test-results.xml</code></pre>
<h2>Use xmlstarlet to manipulate xml element names</h2>
<p>After verifying the content of your xml test result files, it will be necessary to modify the element names so that they are accepted by CircleCI's test result parser. One tool that can be used is xmlstarlet.</p>
<p>Here is an example of a job step that renames the invalid elements flakyFailture, rerunFailure, and flakyError to failure in a file named test.xml:</p>
<pre style="background-color: #f3f3f3;" data-darkreader-inline-bgcolor=""><code>- run:
    name: Correct formatting of test results
    command: |
      xmlstarlet ed --inplace --rename '//testsuite/testcase/flakyFailure' -v 'failure' test.xml
      xmlstarlet ed --inplace --rename '//testsuite/testcase/rerunFailure' -v 'failure' test.xml
      xmlstarlet ed --inplace --rename '//testsuite/testcase/flakyError' -v 'failure' test.xml
</code></pre>
<p>More information on xmlstarlet can be found on the following page: <a href="https://xmlstar.sourceforge.net/doc/UG/ch04s03.html" target="_blank" rel="noopener">XmlStarlet Reference</a></p>
<p> </p>
<h2>Additional Resources: </h2>
<ul>
    <li><a href="https://support.circleci.com/hc/en-us/articles/360021624194-Test-Summary-Troubleshooting" target="_blank" rel="noopener">Test Summary Troubleshooting</a></li>
    <li><a href="https://circleci.com/docs/collect-test-data/" target="_blank" rel="noopener">Collect Test Data</a></li>
    <li><a href="https://circleci.com/docs/use-the-circleci-cli-to-split-tests/#junit-xml-reports" target="_blank" rel="noopener">Use the CircleCI CLI to split tests - JUnit XML reports</a></li>
    <li><a href="https://xmlstar.sourceforge.net/doc/UG/ch04s03.html" target="_blank" rel="noopener">XmlStarlet Reference</a></li>
</ul>